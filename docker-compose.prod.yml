services:
  family-hub:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
    environment:
      - DATABASE_PATH=/data/family-hub.db
      - OIDC_ISSUER=${OIDC_ISSUER}
      - OIDC_CLIENT_ID=${OIDC_CLIENT_ID}
      - OIDC_CLIENT_SECRET=${OIDC_CLIENT_SECRET}
      - OIDC_REDIRECT_URL=${OIDC_REDIRECT_URL}
      - SESSION_SECRET=${SESSION_SECRET}
      - HA_API_TOKEN=${HA_API_TOKEN}
      - LOG_LEVEL=info
    volumes:
      - ./data:/data
    restart: unless-stopped
